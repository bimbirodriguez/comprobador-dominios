<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Comprobador de dominios</title>
<style>
  body{font-family:Arial, sans-serif; background:#f8fafc; color:#0f172a; padding:20px;}
  .card{max-width:900px;margin:0 auto;background:#fff;border-radius:10px;padding:20px;box-shadow:0 6px 18px rgba(0,0,0,0.1);}
  h1{margin:0 0 10px;font-size:22px}
  button{background:#0ea5a4;color:#fff;border:0;padding:10px 16px;border-radius:8px;cursor:pointer;margin-bottom:15px}
  button[disabled]{opacity:.6;cursor:default}
  table{width:100%;border-collapse:collapse}
  th,td{padding:8px;border-bottom:1px solid #ddd;text-align:left}
  th{background:#f1f5f9}
  .ok{color:green;font-weight:bold}
  .blocked{color:#dc2626;font-weight:bold}
  .warn{color:#b45309;font-weight:bold}
</style>
</head>
<body>
  <div class="card">
    <h1>Comprobador de dominios</h1>
    <p>Haz clic en <b>Comprobar</b> para saber si los dominios responden desde tu conexi√≥n.</p>
    <button id="checkBtn">Comprobar</button>
    <table>
      <thead>
        <tr><th>#</th><th>Dominio</th><th>Resultado</th></tr>
      </thead>
      <tbody id="results"></tbody>
    </table>
  </div>

<script>
// Lista de dominios a comprobar
const domains = [
  "http://cf.cdn-959.me/",
  "http://cf.cdn-010.me/",
  "http://cf.player-price3.me/",
  "http://player-sh3.me/",
  "http://cf.player-sh3.me/",
  "http://cf.its-cdn.me/",
  "http://cf.cdn-90.me/",
  "http://cf.cdn-fast1.me/"
  "http://cf.cdn-j1.me/",
  "http://cf.business-cdn.me/",
  "http://pro.business-cdn.me/",
  "http://cf.zaksmart.com/",
  "http://hi-world.me/",
  "http://cf.hi-max.me/",
  "http://ksa.protection-cdn.vip/",
  "http://zaksmart.com/"
];

async function checkDomain(url) {
  try {
    const res = await fetch(`/api/check?url=${encodeURIComponent(url)}`);
    const data = await res.json();
    return { url, ...data };
  } catch (err) {
    return { url, status: "-", result: "Error al comprobar", class:"blocked" };
  }
}

async function runChecks() {
  const btn = document.getElementById("checkBtn");
  const tbody = document.getElementById("results");
  tbody.innerHTML = "";
  btn.disabled = true;
  btn.textContent = "Comprobando...";

  const results = await Promise.all(domains.map(d => checkDomain(d)));

  results.forEach((r,i) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${i+1}</td><td>${r.url}</td><td class="${r.class}">${r.result} ${r.status ? "(" + r.status + ")" : ""}</td>`;
    tbody.appendChild(tr);
  });

  btn.disabled = false;
  btn.textContent = "Comprobar";
}

document.getElementById("checkBtn").addEventListener("click", runChecks);
</script>
</body>
</html>

